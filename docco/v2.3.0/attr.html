<!DOCTYPE html>

<html>
<head>
  <title>attr.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="bindingAttributeSyntax.html">
                bindingAttributeSyntax.js
              </a>
            
              
              <a class="source" href="bindingProvider.html">
                bindingProvider.js
              </a>
            
              
              <a class="source" href="attr.html">
                attr.js
              </a>
            
              
              <a class="source" href="checked.html">
                checked.js
              </a>
            
              
              <a class="source" href="click.html">
                click.js
              </a>
            
              
              <a class="source" href="css.html">
                css.js
              </a>
            
              
              <a class="source" href="enableDisable.html">
                enableDisable.js
              </a>
            
              
              <a class="source" href="event.html">
                event.js
              </a>
            
              
              <a class="source" href="foreach.html">
                foreach.js
              </a>
            
              
              <a class="source" href="hasfocus.html">
                hasfocus.js
              </a>
            
              
              <a class="source" href="html.html">
                html.js
              </a>
            
              
              <a class="source" href="ifIfnotWith.html">
                ifIfnotWith.js
              </a>
            
              
              <a class="source" href="options.html">
                options.js
              </a>
            
              
              <a class="source" href="selectedOptions.html">
                selectedOptions.js
              </a>
            
              
              <a class="source" href="style.html">
                style.js
              </a>
            
              
              <a class="source" href="submit.html">
                submit.js
              </a>
            
              
              <a class="source" href="text.html">
                text.js
              </a>
            
              
              <a class="source" href="uniqueName.html">
                uniqueName.js
              </a>
            
              
              <a class="source" href="value.html">
                value.js
              </a>
            
              
              <a class="source" href="visible.html">
                visible.js
              </a>
            
              
              <a class="source" href="arrayToDomNodeChildren.html">
                arrayToDomNodeChildren.js
              </a>
            
              
              <a class="source" href="compareArrays.html">
                compareArrays.js
              </a>
            
              
              <a class="source" href="expressionRewriting.html">
                expressionRewriting.js
              </a>
            
              
              <a class="source" href="selectExtensions.html">
                selectExtensions.js
              </a>
            
              
              <a class="source" href="google-closure-compiler-utils.html">
                google-closure-compiler-utils.js
              </a>
            
              
              <a class="source" href="memoization.html">
                memoization.js
              </a>
            
              
              <a class="source" href="namespace.html">
                namespace.js
              </a>
            
              
              <a class="source" href="dependencyDetection.html">
                dependencyDetection.js
              </a>
            
              
              <a class="source" href="dependentObservable.html">
                dependentObservable.js
              </a>
            
              
              <a class="source" href="extenders.html">
                extenders.js
              </a>
            
              
              <a class="source" href="mappingHelpers.html">
                mappingHelpers.js
              </a>
            
              
              <a class="source" href="observable.html">
                observable.js
              </a>
            
              
              <a class="source" href="observableArray.html">
                observableArray.js
              </a>
            
              
              <a class="source" href="subscribable.html">
                subscribable.js
              </a>
            
              
              <a class="source" href="jqueryTmplTemplateEngine.html">
                jqueryTmplTemplateEngine.js
              </a>
            
              
              <a class="source" href="nativeTemplateEngine.html">
                nativeTemplateEngine.js
              </a>
            
              
              <a class="source" href="templateEngine.html">
                templateEngine.js
              </a>
            
              
              <a class="source" href="templateRewriting.html">
                templateRewriting.js
              </a>
            
              
              <a class="source" href="templateSources.html">
                templateSources.js
              </a>
            
              
              <a class="source" href="templating.html">
                templating.js
              </a>
            
              
              <a class="source" href="utils.domData.html">
                utils.domData.js
              </a>
            
              
              <a class="source" href="utils.domManipulation.html">
                utils.domManipulation.js
              </a>
            
              
              <a class="source" href="utils.domNodeDisposal.html">
                utils.domNodeDisposal.js
              </a>
            
              
              <a class="source" href="utils.html">
                utils.js
              </a>
            
              
              <a class="source" href="version.html">
                version.js
              </a>
            
              
              <a class="source" href="virtualElements.html">
                virtualElements.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>attr.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="keyword">var</span> attrHtmlToJavascriptMap = { <span class="string">'class'</span>: <span class="string">'className'</span>, <span class="string">'for'</span>: <span class="string">'htmlFor'</span> };
ko.bindingHandlers[<span class="string">'attr'</span>] = {
    <span class="string">'update'</span>: <span class="keyword">function</span>(element, valueAccessor, allBindingsAccessor) {
        <span class="keyword">var</span> value = ko.utils.unwrapObservable(valueAccessor()) || {};
        ko.utils.objectForEach(value, <span class="keyword">function</span>(attrName, attrValue) {
            attrValue = ko.utils.unwrapObservable(attrValue);</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>To cover cases like &quot;attr: { checked:someProp }&quot;, we want to remove the attribute entirely
when someProp is a &quot;no value&quot;-like value (strictly null, false, or undefined)
(because the absence of the &quot;checked&quot; attr is how to mark an element as not checked, etc.)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">var</span> toRemove = (attrValue === <span class="literal">false</span>) || (attrValue === <span class="literal">null</span>) || (attrValue === <span class="literal">undefined</span>);
            <span class="keyword">if</span> (toRemove)
                element.removeAttribute(attrName);</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>In IE &lt;= 7 and IE8 Quirks Mode, you have to use the Javascript property name instead of the
HTML attribute name for certain attributes. IE8 Standards Mode supports the correct behavior,
but instead of figuring out the mode, we&#39;ll just set the attribute through the Javascript
property for IE &lt;= 8.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">if</span> (ko.utils.ieVersion &lt;= <span class="number">8</span> &amp;&amp; attrName <span class="keyword">in</span> attrHtmlToJavascriptMap) {
                attrName = attrHtmlToJavascriptMap[attrName];
                <span class="keyword">if</span> (toRemove)
                    element.removeAttribute(attrName);
                <span class="keyword">else</span>
                    element[attrName] = attrValue;
            } <span class="keyword">else</span> <span class="keyword">if</span> (!toRemove) {
                element.setAttribute(attrName, attrValue.toString());
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>Treat &quot;name&quot; specially - although you can think of it as an attribute, it also needs
special handling on older versions of IE (<a href="https://github.com/SteveSanderson/knockout/pull/333">https://github.com/SteveSanderson/knockout/pull/333</a>)
Deliberately being case-sensitive here because XHTML would regard &quot;Name&quot; as a different thing
entirely, and there&#39;s no strong reason to allow for such casing in HTML.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="keyword">if</span> (attrName === <span class="string">"name"</span>) {
                ko.utils.setElementName(element, toRemove ? <span class="string">""</span> : attrValue.toString());
            }
        });
    }
};</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
